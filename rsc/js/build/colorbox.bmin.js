/* This includes 4 files: jquery.colorbox.js, voting.js, jquery.touchswipe.js, colorbox.init.js */

function init_voting_bar(l,s,e,t){function c(){if("cboxVoting"==l.attr("id")){var e=jQuery("#colorbox").width(),t=l.width();e<t&&jQuery("#colorbox").css({left:jQuery("#colorbox").position().left-Math.round(t-e)/2,width:t})}}if(t&&(l.html('<div class="loading">&nbsp;</div>'),jQuery.ajax({type:"POST",url:s+"&vote_ID="+e,success:function(e){l.html(ajax_debug_clear(e)),c(),votingAdjust()}})),void 0===l.is_inited){function i(t,e,i,n){var o=l.find("#voting_action"),r=o.length?o.val():s;0<l.find("#votingID").length&&(r+="&vote_ID="+l.find("#votingID").val()),0<l.find("#widgetID").length&&(r+="&widget_ID="+l.find("#widgetID").val()),0<l.find("#skinID").length&&(r+="&skin_ID="+l.find("#skinID").val());var a=l.css("backgroundColor");jQuery(t).is(":checkbox")?jQuery(t).is(":checked")?(r+="&checked=1",votingFadeIn(l,i)):(r+="&checked=0",votingFadeIn(l,n)):(jQuery(t).removeAttr("id"),votingFadeIn(l,i)),jQuery.ajax({type:"POST",url:r+"&vote_action="+e,success:function(e){jQuery(t).is(":checkbox")||(l.html(ajax_debug_clear(e)),c()),votingFadeIn(l,a),votingAdjust()}})}l.on("click","a.action_icon",function(){return!1}),l.on("click","#votingLike",function(){i(this,"like","#bcffb5")}),l.on("click","#votingNoopinion",function(){i(this,"noopinion","#bbb")}),l.on("click","#votingDontlike",function(){i(this,"dontlike","#ffc9c9")}),l.on("click","#votingInappropriate",function(){i(this,"inappropriate","#dcc","#bbb")}),l.on("click","#votingSpam",function(){i(this,"spam","#dcc","#bbb")}),l.is_inited=!0}}function votingFadeIn(e,t){if("transparent"==t||"rgba(0, 0, 0, 0)"==t){for(var i=e.parent(),n=t;i&&("transparent"==n||"rgba(0, 0, 0, 0)"==n);)n=i.css("backgroundColor"),i=i.parent();"HTML"!=i[0].tagName&&(t=n)}e.animate({backgroundColor:t},200)}function votingAdjust(){$prev=jQuery("#cboxPrevious"),$wrap=jQuery("#cboxWrapper"),$voting=jQuery("#cboxVoting");$prev.width();var e=$("#colorbox .voting_wrapper"),t=($("#colorbox .voting_wrapper > .btn-group"),$("#colorbox .vote_title_panel"),$("#colorbox .vote_others"),$("#colorbox .separator"),$wrap.parent().width());e.removeClass("compact"),t<=700&&e.addClass("compact")}function init_colorbox(e){if("object"==typeof e&&0!=e.length){var t=e.attr("rel").match(/lightbox\[([a-z]+)/i);switch(t=t?t[1]:""){case"p":e.colorbox(b2evo_colorbox_params_post);break;case"c":e.colorbox(b2evo_colorbox_params_cmnt);break;case"user":e.colorbox(b2evo_colorbox_params_user);break;default:e.colorbox(b2evo_colorbox_params)}}}!function(h,s,e){var a,c,u,d,p,f,g,o,w,v,m,b,x,y,l,T,_,k,j,C,S,Q,I,E,O,H,D,L,M,$,t,W,P,n={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,minWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,minHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",openNewWindowText:"open in new window",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:!1,displayVoting:!1,votingUrl:""},z="colorbox",N="cbox",A=N+"Element",R=N+"_open",r=N+"_load",F=N+"_complete",i=N+"_cleanup",U=N+"_closed",V=N+"_purge",K=!h.support.opacity;function X(e,t,i){return i=s.createElement("div"),e&&(i.id=N+e),i.style.cssText=t||"",h(i)}function Y(e,t){return Math.round((/%/.test(e)?("x"===t?f.width():f.height())/100:1)*parseInt(e,10))}function B(e){return _.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(e)}function q(e){for(e in _=h.extend({},h.data(O,z)))h.isFunction(_[e])&&"on"!==e.substring(0,2)&&(_[e]=_[e].call(O));_.rel=_.rel||O.rel||"nofollow",_.href=_.href||h(O).attr("href"),_.title=_.title||O.title,"string"==typeof _.href&&(_.href=h.trim(_.href))}function G(e,t){t&&t.call(O),h.event.trigger(e)}function Z(e){if(!$){if(O=e,k={},q(),p=h(O),H=0,"nofollow"!==_.rel&&(p=h("."+A).filter(function(){return(h.data(this,z).rel||this.rel)===_.rel}),-1===(H=p.index(O))&&(p=p.add(O),H=p.length-1)),!L){if(L=M=!0,c.show(),_.returnFocus)try{O.blur(),h(O).one(U,function(){try{this.focus()}catch(e){}})}catch(e){}a.css({cursor:_.overlayClose?"pointer":"auto"}).show(),_.w=Y(_.initialWidth,"x"),_.h=Y(_.initialHeight,"y"),P.position(),G(R,_.onOpen),T.add(v).hide(),l.html(_.close).show(),o=N+"Slideshow_",r="click."+N,_.slideshow&&p[1]?(i=function(){b.text(_.slideshowStop).one(r,n),c.removeClass(o+"off").addClass(o+"on"),t=setInterval(function(){L&&(_.loop||H!=p.length-1)||n(),P.next()},_.slideshowSpeed)},n=function(){clearInterval(t),b.text(_.slideshowStart).one(r,i),c.removeClass(o+"on").addClass(o+"off")},_.slideshowAuto?i():n()):c.removeClass(o+"off "+o+"on")}P.load(!0)}var t,i,n,o,r}(P=h.fn[z]=h[z]=function(e,t){var i=this;if(e=e||{},!i[0]){if(i.selector)return i;i=h("<a/>"),e.open=!0}return t&&(e.onComplete=t),i.each(function(){h.data(this,z,h.extend({},h.data(this,z)||n,e)),h(this).addClass(A)}),(h.isFunction(e.open)&&e.open.call(i)||e.open)&&Z(i[0]),i}).init=function(){f=h(e),c=X().attr({id:z,class:K?N+"IE":""}),a=X("Overlay").hide(),u=X("Wrapper"),d=X("Content").append(g=X("LoadedContent","width:0; height:0; overflow:hidden"),w=X("LoadingOverlay").add(X("LoadingGraphic")),v=X("Title"),$infoBar=X("InfoBar").append($nav=X("Navigation").append(y=X("Previous"),m=X("Current"),x=X("Next")),$voting=X("Voting"),b=X("Slideshow"),l=X("Close"),$open=X("Open"))),u.append(d),o=X(!1,"position:absolute; width:9999px; visibility:hidden; display:none"),h("body").prepend(a,c.append(u,o)),$voting.data("voting_positions_done",0),previous_title="",d.children().hover(function(){h(this).addClass("hover")},function(){h(this).removeClass("hover")}).addClass("hover"),j=d.outerHeight(!0)-d.height(),C=d.outerWidth(!0)-d.width(),Q=g.outerHeight(!0),I=g.outerWidth(!0),S=Q,E=l.height()+4,c.css({"padding-bottom":j,"padding-right":C}).hide(),x.click(function(){P.next()}),y.click(function(){P.prev()}),l.click(function(){P.close()}),$open.click(function(){P.close()}),T=x.add(y).add(m).add(b),d.children().removeClass("hover"),a.click(function(){_.overlayClose&&P.close()}),h(s).bind("keydown."+N,function(e){var t=e.keyCode;L&&_.escKey&&27===t&&(e.preventDefault(),P.close()),L&&_.arrowKey&&p[1]&&(37===t?(e.preventDefault(),y.click()):39===t&&(e.preventDefault(),x.click()))})},P.remove=function(){c.add(a).remove(),h("."+A).removeData(z).removeClass(A)},P.position=function(e,t){var i=null==k.pw||_.w>k.pw?_.w:k.pw,n=null==k.ph||_.h>k.ph?_.h:k.ph,o=h("#colorbox .voting_wrapper");parseInt(d.css("border-bottom"));$infoBar.css({minHeight:E+"px"}),Q=i<=700&&$voting.is(":visible")?(o.addClass("compact"),2*S-3):(o.removeClass("compact"),S);var r=0,a=0;function l(e){d[0].style.width=e.style.width,w[0].style.height=w[1].style.height=d[0].style.height=e.style.height}f.unbind("resize."+N),c.hide(),_.fixed?c.css({position:"fixed"}):(r=f.scrollTop(),a=f.scrollLeft(),c.css({position:"absolute"})),!1!==_.right?a+=Math.max(f.width()-i-I-C-Y(_.right,"x"),0):!1!==_.left?a+=Y(_.left,"x"):a+=Math.round(Math.max(f.width()-i-I-C,0)/2),!1!==_.bottom?r+=Math.max(s.documentElement.clientHeight-n-Q-j-Y(_.bottom,"y"),0):!1!==_.top?r+=Y(_.top,"y"):r+=Math.round(Math.max(s.documentElement.clientHeight-n-Q-j,0)/2),c.show(),e=c.width()===i+I&&c.height()===n+Q?0:e||0,u[0].style.width=u[0].style.height="9999px",c.dequeue().animate({width:i+I,height:n+Q,top:r,left:a},{duration:e,complete:function(){l(this),M=!1,u[0].style.width=i+I+C+"px",u[0].style.height=n+Q+j+"px",t&&t(),setTimeout(function(){f.bind("resize."+N,P.position)},1),P.resizeVoting(),u.parent().width()<380?b.hide():b.show()},step:function(){l(this)}})},P.resize=function(e){if(L){if((e=e||{}).width&&(_.w=Y(e.width,"x")-I-C),e.innerWidth&&(_.w=Y(e.innerWidth,"x")),g.css({width:_.w}),e.height&&(_.h=Y(e.height,"y")-Q-j),e.innerHeight&&(_.h=Y(e.innerHeight,"y")),!e.innerHeight&&!e.height){var t=g.wrapInner("<div style='overflow:auto'></div>").children();_.h=t.outerHeight(),t.replaceWith(t.children())}g.css({height:_.h}),k.pw=_.w,k.ph=_.h,P.position("none"===_.transition?0:_.speed)}},P.prep=function(e){if(L){var t,s="none"===_.transition?0:_.speed;g.remove(),(g=X("LoadedContent").append(e)).hide().appendTo(o.show()).css({width:(_.w=_.w||g.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w=_.minWidth&&_.minWidth>_.w?_.minWidth:_.w,k.pw=null==k.pw||_.w>k.pw?_.w:k.pw,k.pw),overflow:_.scrolling?"auto":"hidden"}).css({height:(_.h=_.h||g.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h=_.minHeight&&_.minHeight>_.h?_.minHeight:_.h,k.ph=null==k.ph||_.h>k.ph?_.h:k.ph,k.ph)}).prependTo(d),o.hide(),h(D).css({float:"none"}),t=function(){var e,t,i,n,o,r,a=p.length;function l(){K&&c[0].style.removeAttribute("filter")}L&&(r=function(){clearTimeout(W),w.hide(),G(F,_.onComplete)},K&&D&&g.fadeIn(100),v.add(g).show(),1<a?("string"==typeof _.current&&380<g.width()&&m.html(_.current.replace("{current}",H+1).replace("{total}",a)).show(),x[_.loop||H<a-1?"show":"hide"]().html(_.next),y[_.loop||H?"show":"hide"]().html(_.previous),e=H?p[H-1]:p[a-1],i=H<a-1?p[H+1]:p[0],_.slideshow&&380<g.width()&&b.show(),_.preloading&&(n=h.data(i,z).href||i.href,t=h.data(e,z).href||e.href,n=h.isFunction(n)?n.call(i):n,t=h.isFunction(t)?t.call(e):t,B(n)&&(h("<img/>")[0].src=n),B(t)&&(h("<img/>")[0].src=t))):T.hide(),_.iframe?(o=h("<iframe/>").addClass(N+"Iframe")[0],_.fastIframe?r():h(o).one("load",r),o.name=N+ +new Date,o.src=_.href,_.scrolling||(o.scrolling="no"),K&&(o.frameBorder=0,o.allowTransparency="true"),h(o).appendTo(g).one(V,function(){o.src="//about:blank"})):r(),"fade"===_.transition?c.fadeTo(s,1,l):l())},"fade"===_.transition?c.fadeTo(s,0,function(){P.position(0,t)}):P.position(s,t)}},P.load=function(e){var t,i,n=P.prep;D=!(M=!0),O=p[H],e||q(),G(V),G(r,_.onLoad),previous_title=_.title,_.displayVoting&&""!=_.votingUrl&&""!=O.id?(0==$voting.data("voting_positions_done")&&(0==Q&&(Q=g.outerHeight(!0)),$voting.data("voting_positions_done",1)),$voting.show(),init_voting_bar($voting,_.votingUrl,O.id,!0)):""!=$voting.html()&&($voting.html("").hide(),$voting.data("voting_positions_done",0)),_.h=_.height?Y(_.height,"y")-Q-j:_.innerHeight&&Y(_.innerHeight,"y"),_.w=_.width?Y(_.width,"x")-I-C:_.innerWidth&&Y(_.innerWidth,"x"),_.mw=_.w,_.mh=_.h,_.maxWidth&&(_.mw=Y(_.maxWidth,"x")-I-C,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.maxHeight&&(_.mh=Y(_.maxHeight,"y")-Q-j,_.mh=_.h&&_.h<_.mh?_.h:_.mh),t=_.href,W=setTimeout(function(){w.show()},100),_.inline?(X().hide().insertBefore(h(t)[0]).one(V,function(){h(this).replaceWith(g.children())}),n(h(t))):_.iframe?n(" "):_.html?n(_.html):B(t)?(h(D=new Image).addClass(N+"Photo").error(function(){_.title=!1,n(X("Error").text("This image could not be loaded"))}).load(function(){var e;D.onload=null,_.scalePhotos&&(i=function(){D.height-=D.height*e,D.width-=D.width*e},_.mw&&D.width>_.mw&&(e=(D.width-_.mw)/D.width,i()),_.mh&&D.height>_.mh&&(e=(D.height-_.mh)/D.height,i())),_.h&&(D.style.marginTop=Math.max(_.h-D.height,0)/2+"px"),jQuery(D).removeClass("zoomin zoomout"),colorbox_is_zoomed=!1;var s=0,c=0,t=D.naturalWidth>1.1*D.width||D.naturalHeight>1.1*D.height;t&&(D.className=D.className+" zoomin"),!t&&p[1]&&(H<p.length-1||_.loop)&&(D.onclick=function(e){P.next()}),t&&jQuery(D).bind("click dblclick",function(e,t){if(colorbox_is_zoomed)D.className=D.className.replace(/zoomout/,""),D.width=s,D.height=c,jQuery(this).parent().scrollLeft(0).scrollTop(0),jQuery(this).css({position:"relative",top:"0",left:"0"});else{P.resize({width:_.mw,height:_.mh+parseInt(g.css("margin-bottom"))});var i=jQuery(this).offset(),n=void 0!==e.pageX?e.pageX:t.originalEvent.touches[0].pageX,o=void 0!==e.pageY?e.pageY:t.originalEvent.touches[0].pageY,r=(n-i.left)/jQuery(this).width(),a=(o-i.top)/jQuery(this).height();D.className=D.className+" zoomout",h(D).css({position:"static",top:0,left:0,transform:"none"}),s=D.width,c=D.height,D.removeAttribute("width"),D.removeAttribute("height");var l=jQuery(this).parent()[0];jQuery(this).parent().scrollLeft(r*(l.scrollWidth-l.clientWidth)).scrollTop(a*(l.scrollHeight-l.clientHeight))}colorbox_is_zoomed=!colorbox_is_zoomed}),K&&(D.style.msInterpolationMode="bicubic"),setTimeout(function(){n(D)},1)}),setTimeout(function(){D.src=t},1)):t&&o.load(t,_.data,function(e,t,i){n("error"===t?X("Error").text("Request unsuccessful: "+i.statusText):h(this).contents())})},P.next=function(){!M&&p[1]&&(H<p.length-1||_.loop)&&(H=H<p.length-1?H+1:0,P.load())},P.prev=function(){!M&&p[1]&&(H||_.loop)&&(H=H?H-1:p.length-1,P.load())},P.close=function(){L&&!$&&(L=!($=!0),G(i,_.onCleanup),f.unbind("."+N),a.fadeTo(200,0),c.stop().fadeTo(300,0,function(){c.add(a).css({opacity:1,cursor:"auto"}).hide(),G(V),g.remove(),setTimeout(function(){$=!1,G(U,_.onClosed)},1)}))},P.resizeVoting=function(){var e=h("#colorbox .voting_wrapper"),t=u.parent().width();t<=480?m.hide():m.show(),$infoBar.css({minHeight:E+"px"}),Q=t<=700&&$voting.is(":visible")?(e.addClass("compact"),2*S-3):(e.removeClass("compact"),S)},P.element=function(){return h(O)},P.settings=n,t=function(e){0!==e.button&&void 0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||(e.preventDefault(),Z(this))},h.fn.delegate?h(s).delegate("."+A,"click",t):h(s).on("click","."+A,t),h(P.init)}(jQuery,document,this),jQuery.event.special.dblclick={setup:function(e,t){jQuery(this).bind("touchstart.dblclick",jQuery.event.special.dblclick.handler)},teardown:function(e){jQuery(this).unbind("touchstart.dblclick")},handler:function(e){var t=e.target,i=jQuery(t),n=i.data("lastTouch")||0,o=(new Date).getTime(),r=o-n;20<r&&r<500?(i.data("lastTouch",0),i.trigger("dblclick",e)):i.data("lastTouch",o)}},function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(function(oe){"use strict";var re="left",ae="right",le="up",se="down",ce="in",he="out",ue="none",de="auto",pe="swipe",fe="pinch",ge="tap",we="doubletap",ve="longtap",me="horizontal",be="vertical",xe="all",ye=10,Te="start",_e="move",ke="end",je="cancel",Ce="ontouchstart"in window,Se="TouchSwipe";function n(e,v){var t=Ce||!v.fallbackToMouseEvents,i=t?"touchstart":"mousedown",n=t?"touchmove":"mousemove",o=t?"touchend":"mouseup",r=t?null:"mouseleave",a="touchcancel",m=0,b=null,x=0,y=0,T=0,_=1,k=0,j=0,C=null,l=oe(e),S="start",Q=0,I=null,s=0,E=0,c=0,h=0,u=0,d=null;try{l.bind(i,p),l.bind(a,w)}catch(e){oe.error("events not supported "+i+","+a+" on jQuery.swipe")}function p(e){if(!0!==l.data(Se+"_intouch")&&!(0<oe(e.target).closest(v.excludedElements,l).length)){var t,i,n=e.originalEvent?e.originalEvent:e,o=Ce?n.touches[0]:n;return S=Te,Ce?Q=n.touches.length:e.preventDefault(),j=b=null,_=1,k=T=y=x=m=0,I=function(){for(var e=[],t=0;t<=5;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}(),(i={})[re]=ee(re),i[ae]=ee(ae),i[le]=ee(le),i[se]=ee(se),C=i,Y(),!Ce||Q===v.fingers||v.fingers===xe||N()?(G(0,o),s=ne(),2==Q&&(G(1,n.touches[1]),y=T=ie(I[0].start,I[1].start)),(v.swipeStatus||v.pinchStatus)&&(t=L(n,S))):t=!1,!1===t?(L(n,S=je),t):(q(!0),null)}}function f(e){var t=e.originalEvent?e.originalEvent:e;if(S!==ke&&S!==je&&!B()){var i,n,o,r,a,l,s,c,h,u,d,p,f=Z(Ce?t.touches[0]:t);if(E=ne(),Ce&&(Q=t.touches.length),S=_e,2==Q&&(0==y?(G(1,t.touches[1]),y=T=ie(I[0].start,I[1].start)):(Z(t.touches[1]),T=ie(I[0].end,I[1].end),I[0].end,I[1].end,j=_<1?he:ce),_=(T/y*1).toFixed(2),k=Math.abs(y-T)),Q===v.fingers||v.fingers===xe||!Ce||N()){if(u=f.start,d=f.end,p=function(e,t){var i=e.x-t.x,n=t.y-e.y,o=Math.atan2(n,i),r=Math.round(180*o/Math.PI);r<0&&(r=360-Math.abs(r));return r}(u,d),function(e,t){if(v.allowPageScroll===ue||N())e.preventDefault();else{var i=v.allowPageScroll===de;switch(t){case re:(v.swipeLeft&&i||!i&&v.allowPageScroll!=me)&&e.preventDefault();break;case ae:(v.swipeRight&&i||!i&&v.allowPageScroll!=me)&&e.preventDefault();break;case le:(v.swipeUp&&i||!i&&v.allowPageScroll!=be)&&e.preventDefault();break;case se:(v.swipeDown&&i||!i&&v.allowPageScroll!=be)&&e.preventDefault()}}}(e,b=p<=45&&0<=p?re:p<=360&&315<=p?re:135<=p&&p<=225?ae:45<p&&p<135?se:le),c=f.start,h=f.end,m=Math.round(Math.sqrt(Math.pow(h.x-c.x,2)+Math.pow(h.y-c.y,2))),x=te(),l=b,s=m,s=Math.max(s,J(l)),C[l].distance=s,(v.swipeStatus||v.pinchStatus)&&(i=L(t,S)),!v.triggerOnTouchEnd||v.triggerOnTouchLeave){var g=!0;if(v.triggerOnTouchLeave){var w={left:(a=(r=oe(r=this)).offset()).left,right:a.left+r.outerWidth(),top:a.top,bottom:a.top+r.outerHeight()};n=f.end,o=w,g=n.x>o.left&&n.x<o.right&&n.y>o.top&&n.y<o.bottom}!v.triggerOnTouchEnd&&g?S=D(_e):v.triggerOnTouchLeave&&!g&&(S=D(ke)),S!=je&&S!=ke||L(t,S)}}else L(t,S=je);!1===i&&L(t,S=je)}}function g(e){var t=e.originalEvent;return Ce&&0<t.touches.length?(c=ne(),h=event.touches.length+1,!0):(B()&&(Q=h),e.preventDefault(),E=ne(),x=te(),W()?L(t,S=je):v.triggerOnTouchEnd||0==v.triggerOnTouchEnd&&S===_e?L(t,S=ke):!v.triggerOnTouchEnd&&V()?M(t,S=ke,ge):S===_e&&L(t,S=je),q(!1),null)}function w(){T=y=s=E=Q=0,_=1,Y(),q(!1)}function O(e){var t=e.originalEvent;v.triggerOnTouchLeave&&L(t,S=D(ke))}function H(){l.unbind(i,p),l.unbind(a,w),l.unbind(n,f),l.unbind(o,g),r&&l.unbind(r,O),q(!1)}function D(e){var t=e,i=P(),n=$(),o=W();return!i||o?t=je:!n||e!=_e||v.triggerOnTouchEnd&&!v.triggerOnTouchLeave?!n&&e==ke&&v.triggerOnTouchLeave&&(t=je):t=ke,t}function L(e,t){var i=void 0;return A()&&R()||R()?i=M(e,t,pe):(z()&&N()||N())&&!1!==i&&(i=M(e,t,fe)),X()&&K()&&!1!==i?i=M(e,t,we):x>v.longTapThreshold&&m<ye&&v.longTap&&!1!==i?i=M(e,t,ve):1!==Q&&Ce||!isNaN(m)&&0!==m||!V()||!1===i||(i=M(e,t,ge)),t===je&&w(),t===ke&&(Ce?0==e.touches.length&&w():w()),i}function M(e,t,i){var n=void 0;if(i==pe){if(l.trigger("swipeStatus",[t,b||null,m||0,x||0,Q]),v.swipeStatus&&!1===(n=v.swipeStatus.call(l,e,t,b||null,m||0,x||0,Q)))return!1;if(t==ke&&A()){if(l.trigger("swipe",[b,m,x,Q]),v.swipe&&!1===(n=v.swipe.call(l,e,b,m,x,Q)))return!1;switch(b){case re:l.trigger("swipeLeft",[b,m,x,Q]),v.swipeLeft&&(n=v.swipeLeft.call(l,e,b,m,x,Q));break;case ae:l.trigger("swipeRight",[b,m,x,Q]),v.swipeRight&&(n=v.swipeRight.call(l,e,b,m,x,Q));break;case le:l.trigger("swipeUp",[b,m,x,Q]),v.swipeUp&&(n=v.swipeUp.call(l,e,b,m,x,Q));break;case se:l.trigger("swipeDown",[b,m,x,Q]),v.swipeDown&&(n=v.swipeDown.call(l,e,b,m,x,Q))}}}if(i==fe){if(l.trigger("pinchStatus",[t,j||null,k||0,x||0,Q,_]),v.pinchStatus&&!1===(n=v.pinchStatus.call(l,e,t,j||null,k||0,x||0,Q,_)))return!1;if(t==ke&&z())switch(j){case ce:l.trigger("pinchIn",[j||null,k||0,x||0,Q,_]),v.pinchIn&&(n=v.pinchIn.call(l,e,j||null,k||0,x||0,Q,_));break;case he:l.trigger("pinchOut",[j||null,k||0,x||0,Q,_]),v.pinchOut&&(n=v.pinchOut.call(l,e,j||null,k||0,x||0,Q,_))}}return i==ge?t!==je&&t!==ke||(clearTimeout(d),K()&&!X()?(u=ne(),d=setTimeout(oe.proxy(function(){u=null,l.trigger("tap",[e.target]),v.tap&&(n=v.tap.call(l,e,e.target))},this),v.doubleTapThreshold)):(u=null,l.trigger("tap",[e.target]),v.tap&&(n=v.tap.call(l,e,e.target)))):i==we?t!==je&&t!==ke||(clearTimeout(d),u=null,l.trigger("doubletap",[e.target]),v.doubleTap&&(n=v.doubleTap.call(l,e,e.target))):i==ve&&(t!==je&&t!==ke||(clearTimeout(d),u=null,l.trigger("longtap",[e.target]),v.longTap&&(n=v.longTap.call(l,e,e.target)))),n}function $(){var e=!0;return null!==v.threshold&&(e=m>=v.threshold),e}function W(){var e=!1;return null!==v.cancelThreshold&&null!==b&&(e=J(b)-m>=v.cancelThreshold),e}function P(){return!v.maxTimeThreshold||!(x>=v.maxTimeThreshold)}function z(){var e=F(),t=U(),i=null===v.pinchThreshold||k>=v.pinchThreshold;return e&&t&&i}function N(){return!!(v.pinchStatus||v.pinchIn||v.pinchOut)}function A(){var e=P(),t=$(),i=F(),n=U();return!W()&&n&&i&&t&&e}function R(){return!!(v.swipe||v.swipeStatus||v.swipeLeft||v.swipeRight||v.swipeUp||v.swipeDown)}function F(){return Q===v.fingers||v.fingers===xe||!Ce}function U(){return 0!==I[0].end.x}function V(){return!!v.tap}function K(){return!!v.doubleTap}function X(){if(null==u)return!1;var e=ne();return K()&&e-u<=v.doubleTapThreshold}function Y(){h=c=0}function B(){var e=!1;c&&(ne()-c<=v.fingerReleaseThreshold&&(e=!0));return e}function q(e){!0===e?(l.bind(n,f),l.bind(o,g),r&&l.bind(r,O)):(l.unbind(n,f,!1),l.unbind(o,g,!1),r&&l.unbind(r,O,!1)),l.data(Se+"_intouch",!0===e)}function G(e,t){var i=void 0!==t.identifier?t.identifier:0;return I[e].identifier=i,I[e].start.x=I[e].end.x=t.pageX||t.clientX,I[e].start.y=I[e].end.y=t.pageY||t.clientY,I[e]}function Z(e){var t=function(e){for(var t=0;t<I.length;t++)if(I[t].identifier==e)return I[t]}(void 0!==e.identifier?e.identifier:0);return t.end.x=e.pageX||e.clientX,t.end.y=e.pageY||e.clientY,t}function J(e){if(C[e])return C[e].distance}function ee(e){return{direction:e,distance:0}}function te(){return E-s}function ie(e,t){var i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.round(Math.sqrt(i*i+n*n))}function ne(){return(new Date).getTime()}this.enable=function(){return l.bind(i,p),l.bind(a,w),l},this.disable=function(){return H(),l},this.destroy=function(){return H(),l.data(Se,null),l},this.option=function(e,t){if(void 0!==v[e]){if(void 0===t)return v[e];v[e]=t}else oe.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}oe.fn.swipe=function(e){var t=oe(this),i=t.data(Se);if(i&&"string"==typeof e){if(i[e])return i[e].apply(this,Array.prototype.slice.call(arguments,1));oe.error("Method "+e+" does not exist on jQuery.swipe")}else if(!(i||"object"!=typeof e&&e))return function(i){!i||void 0!==i.allowPageScroll||void 0===i.swipe&&void 0===i.swipeStatus||(i.allowPageScroll=ue);void 0!==i.click&&void 0===i.tap&&(i.tap=i.click);i||(i={});return i=oe.extend({},oe.fn.swipe.defaults,i),this.each(function(){var e=oe(this),t=e.data(Se);t||(t=new n(this,i),e.data(Se,t))})}.apply(this,arguments);return t},oe.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"},oe.fn.swipe.phases={PHASE_START:Te,PHASE_MOVE:_e,PHASE_END:ke,PHASE_CANCEL:je},oe.fn.swipe.directions={LEFT:re,RIGHT:ae,UP:le,DOWN:se,IN:ce,OUT:he},oe.fn.swipe.pageScroll={NONE:ue,HORIZONTAL:me,VERTICAL:be,AUTO:de},oe.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:xe}}),jQuery(document).ready(function(){jQuery('a[rel^="lightbox"]').each(function(){init_colorbox(jQuery(this))}),jQuery("#colorbox").swipe({swipeLeft:function(e,t,i,n,o){"undefined"!=typeof colorbox_is_zoomed&&colorbox_is_zoomed||jQuery.colorbox.next()},swipeRight:function(e,t,i,n,o){"undefined"!=typeof colorbox_is_zoomed&&colorbox_is_zoomed||jQuery.colorbox.prev()}}),jQuery(document).on("click","#colorbox img.cboxPhoto",function(){jQuery(this).hasClass("zoomout")?jQuery("#colorbox").swipe("disable"):jQuery("#colorbox").swipe("enable")})});