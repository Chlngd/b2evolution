/* This file includes ALL generic files that may be used on any page of front-office and back-office */

function evo_prevent_key_enter(e){jQuery(e).keypress(function(e){if(13==e.keyCode)return!1})}jQuery(document).ready(function(){if("undefined"!=typeof evo_init_datepicker&&jQuery(evo_init_datepicker.selector).datepicker(evo_init_datepicker.config),"undefined"!=typeof evo_link_position_config){var t=(a=evo_link_position_config.config).display_inline_reminder,o=a.defer_inline_reminder;jQuery(document).on("change",evo_link_position_config.selector,{url:a.url,crumb:a.crumb},function(e){"inline"==this.value&&t&&!o&&(alert(a.alert_msg),t=!1),evo_link_change_position(this,e.data.url,e.data.crumb)})}if("undefined"!=typeof evo_itemform_renderers__click&&jQuery("#itemform_renderers .dropdown-menu").on("click",function(e){e.stopPropagation()}),"undefined"!=typeof evo_commentform_renderers__click&&jQuery("#commentform_renderers .dropdown-menu").on("click",function(e){e.stopPropagation()}),"undefined"!=typeof evo_disp_download_delay_config){var e=evo_disp_download_delay_config,r=setInterval(function(){jQuery("#download_timer").html(e),0==e&&(clearInterval(r),jQuery("#download_help_url").show()),e--},1e3);jQuery("#download_timer_js").show()}if("undefined"!=typeof evo_skin_bootstrap_forum__quote_button_click&&jQuery(".quote_button").click(function(){var e=jQuery("form[id^=evo_comment_form_id_]");return 0==e.length||(e.attr("action",jQuery(this).attr("href")),e.submit(),!1)}),"undefined"!=typeof evo_ajax_form_config)for(var n=Object.values(evo_ajax_form_config),i=0;i<n.length;i++){var a=n[i];window["ajax_form_offset_"+a.form_number]=jQuery("#ajax_form_number_"+a.form_number).offset().top,window["request_sent_"+a.form_number]=!1,window["ajax_form_loading_number_"+a.form_number]=0;var _="get_form"+a.form_number;window[_]=function(){var r="#ajax_form_number_"+a.form_number;window["ajax_form_loading_number_"+a.form_number]++,jQuery.ajax({url:htsrv_url+"anon_async.php",type:"POST",data:a.json_params,success:function(e){jQuery(r).html(ajax_debug_clear(e))},error:function(e,t,o){jQuery(".loader_ajax_form",r).after('<div class="red center">'+o+": "+e.responseText+"</div>"),window["ajax_form_loading_number_"+a.form_number]<3&&setTimeout(function(){jQuery(".loader_ajax_form",r).next().remove(),window[_]()},1e3)}})};var u="check_and_show_"+a.form_number;window[u]=function(e){if(!window["request_sent_"+a.form_number]){var t=null!=typeof e&&e;(t=t||jQuery(window).scrollTop()>=window["ajax_form_offset_"+a.form_number]-jQuery(window).height()-20)&&(window["request_sent_"+a.form_number]=!0,window[_]())}},jQuery(window).scroll(function(){window[u]()}),jQuery(window).resize(function(){window[u]()}),window[u](a.load_ajax_form_on_page_load)}if("undefined"!=typeof evo_user_func__callback_filter_userlist&&(jQuery("#country").change(function(){jQuery(this);jQuery.ajax({type:"POST",url:htsrv_url+"anon_async.php",data:"action=get_regions_option_list&ctry_id="+jQuery(this).val(),success:function(e){jQuery("#region").html(ajax_debug_clear(e)),1<jQuery("#region option").length?jQuery("#region_filter").show():jQuery("#region_filter").hide(),load_subregions(0)}})}),jQuery("#region").change(function(){load_subregions(jQuery(this).val())}),jQuery("#subregion").change(function(){load_cities(jQuery("#country").val(),jQuery("#region").val(),jQuery(this).val())}),window.load_subregions=function(t){jQuery.ajax({type:"POST",url:htsrv_url+"anon_async.php",data:"action=get_subregions_option_list&rgn_id="+t,success:function(e){jQuery("#subregion").html(ajax_debug_clear(e)),1<jQuery("#subregion option").length?jQuery("#subregion_filter").show():jQuery("#subregion_filter").hide(),load_cities(jQuery("#country").val(),t,0)}})},window.load_cities=function(e,t,o){void 0===e&&(e=0),jQuery.ajax({type:"POST",url:htsrv_url+"anon_async.php",data:"action=get_cities_option_list&ctry_id="+e+"&rgn_id="+t+"&subrg_id="+o,success:function(e){jQuery("#city").html(ajax_debug_clear(e)),1<jQuery("#city option").length?jQuery("#city_filter").show():jQuery("#city_filter").hide()}})}),"undefined"!=typeof evo_widget_param_switcher_config)for(i=0;i<evo_widget_param_switcher_config.length;i++){a=evo_widget_param_switcher_config[i];jQuery("a[data-param-switcher="+a.widget_id+"]").click(function(){var e=a.default_params,t=new RegExp("([?&])(("+jQuery(this).data("code")+"|redir)=[^&]*(&|$))+","g"),o=location.href.replace(t,"$1");for(default_param in o=o.replace(/[\?&]$/,""),o+=-1===o.indexOf("?")?"?":"&",o+=jQuery(this).data("code")+"="+jQuery(this).data("value"),e)t=new RegExp("[?&]"+default_param+"=","g"),o.match(t)||(o+="&"+default_param+"="+e[default_param]);return o+="&redir=no",window.history.pushState("","",o),jQuery("a[data-param-switcher="+a.widget_id+"]").attr("class",a.link_class),jQuery(this).attr("class",a.active_link_class),!1})}var s;"undefined"!=typeof coll_activity_stats_widget_config&&(window.resize_coll_activity_stat_widget=function(){var e=[],t=[],o=[],r=coll_activity_stats_widget_config.time_period;if(null==plot){plot=jQuery("#canvasbarschart").data("plot"),o=plot.axes.xaxis.ticks.slice(0);for(var n=0;n<plot.series.length;n++)e.push(plot.series[n].data.slice(0));if(7==e[0].length)t=e;else for(n=0;n<e.length;n++){for(var i=[],a=7,_=1;0<a;a--,_++)i.unshift([a,e[n][e[n].length-_][1]]);t.push(i)}}if(jQuery("#canvasbarschart").width()<650){if("last_week"!=r){for(n=0;n<plot.series.length;n++)plot.series[n].data=t[n];plot.axes.xaxis.ticks=o.slice(-7),r="last_week"}}else if("last_month"!=r){for(n=0;n<plot.series.length;n++)plot.series[n].data=e[n];plot.axes.xaxis.ticks=o,r="last_month"}plot.replot({resetAxes:!0})},jQuery(window).resize(function(){clearTimeout(s),s=setTimeout(resize_coll_activity_stat_widget,100)}))}),jQuery(document).ready(function(){"undefined"!=typeof evo_skin_bootstrap_forums__post_list_header&&jQuery("#evo_workflow_status_filter").change(function(){var e=location.href.replace(/([\?&])((status|redir)=[^&]*(&|$))+/,"$1"),t=jQuery(this).val();""!==t&&(e+=(-1==e.indexOf("?")?"?":"&")+"status="+t+"&redir=no"),location.href=e.replace("?&","?").replace(/\?$/,"")})}),jQuery(document).ready(function(){"undefined"!=typeof evo_comment_rating_config&&jQuery("#comment_rating").html("").raty(evo_comment_rating_config)}),jQuery(document).ready(function(){"undefined"!=typeof evo_widget_coll_search_form&&(jQuery(evo_widget_coll_search_form.selector).tokenInput(evo_widget_coll_search_form.url,evo_widget_coll_search_form.config),void 0!==evo_widget_coll_search_form.placeholder&&jQuery("#token-input-search_author").attr("placeholder",evo_widget_coll_search_form.placeholder).css("width","100%"))}),jQuery(document).ready(function(){"undefined"!=typeof evo_autocomplete_login_config&&(jQuery("input.autocomplete_login").on("added",function(){jQuery("input.autocomplete_login").each(function(){if(!jQuery(this).hasClass("tt-input")&&!jQuery(this).hasClass("tt-hint")){var t="";t=jQuery(this).hasClass("only_assignees")?restapi_url+evo_autocomplete_login_config.url:restapi_url+"users/logins",jQuery(this).data("status")&&(t+="&status="+jQuery(this).data("status")),jQuery(this).typeahead(null,{displayKey:"login",source:function(e,r){jQuery.ajax({type:"GET",dataType:"JSON",url:t,data:{q:e},success:function(e){var t=new Array;for(var o in e.list)t.push({login:e.list[o]});r(t)}})}})}})}),jQuery("input.autocomplete_login").trigger("added"),evo_prevent_key_enter(evo_autocomplete_login_config.selector))}),jQuery(document).ready(function(){"undefined"!=typeof evo_widget_poll_initialize&&(jQuery('.evo_poll__selector input[type="checkbox"]').on("click",function(){var e=jQuery(this).closest(".evo_poll__table"),t=jQuery(".evo_poll__selector input:checked",e).length>=e.data("max-answers");jQuery(".evo_poll__selector input[type=checkbox]:not(:checked)",e).prop("disabled",t)}),jQuery(".evo_poll__table").each(function(){var e=jQuery(this);e.width()>e.parent().width()&&(jQuery(".evo_poll__title",e).css("white-space","normal"),jQuery(".evo_poll__title label",e).css({width:Math.floor(e.parent().width()/2)+"px","word-wrap":"break-word"}))}))}),jQuery(document).ready(function(){if("undefined"!=typeof evo_plugin_auto_anchors_settings){jQuery("h1, h2, h3, h4, h5, h6").each(function(){if(jQuery(this).attr("id")&&jQuery(this).hasClass("evo_auto_anchor_header")){var e=location.href.replace(/#.+$/,"")+"#"+jQuery(this).attr("id");jQuery(this).append(' <a href="'+e+'" class="evo_auto_anchor_link"><span class="fa fa-link"></span></a>')}});var t=jQuery("#evo_toolbar").length?jQuery("#evo_toolbar").height():0;jQuery(".evo_auto_anchor_link").on("click",function(){var e=jQuery(this).attr("href");return jQuery("html,body").animate({scrollTop:jQuery(this).offset().top-t-evo_plugin_auto_anchors_settings.offset_scroll},function(){window.history.pushState("","",e)}),!1})}}),jQuery(document).ready(function(){if("undefined"!=typeof evo_plugin_table_contents_settings){var o=jQuery("#evo_toolbar").length?jQuery("#evo_toolbar").height():0;jQuery(".evo_plugin__table_of_contents a").on("click",function(){var e=jQuery("#"+jQuery(this).data("anchor"));if(0==e.length||!e.prop("tagName").match(/^h[1-6]$/i))return!0;var t=jQuery(this).attr("href");return jQuery("html,body").animate({scrollTop:e.offset().top-o-evo_plugin_table_contents_settings.offset_scroll},function(){window.history.pushState("","",t)}),!1})}});